# Moonbit-Python

[简体中文](#Moonbit-Python-1)

**Notice**: This project is currently in the early stages of development and may be unstable. It is recommended to use it only in testing environments. Please evaluate carefully before using it in production.

## Project Overview

Moonbit-Python is a CPython-based bridging tool that enables developers to directly manipulate Python objects in Moonbit projects and leverage the rich resources of the Python ecosystem, including but not limited to popular libraries such as NumPy and Matplotlib.

## Quick Start

The following example demonstrates how to use the Matplotlib library in Moonbit to plot a logarithmic function:

```moonbit
fn main {
  let x : Array[Double] = [] 
  for i in 0..<100 {
    x.push(i.to_double())
  }
  let y = x.map(@math.ln)

  let x = PyList::from(x)
  let y = PyList::from(y)

  @plt.plot(x, y)
  @plt.show()
}
```

Run the example with the following command:

```shell
moon run main/main.mbt --target native
```

After execution, a logarithmic function plot generated by Matplotlib will be displayed.

![matplotlib-log](https://blogimgs-1309485105.cos.ap-nanjing.myqcloud.com/pics-for-documents/moonbit-matplotlib-log.png)

## Installation and Configuration

1. Add project dependencies:

```shell
moon add Kaida-Amethyst/python
```

2. Confirm the local Python version (e.g., `python3.13`).

3. Download the necessary C files:
   - File location: [CWarp Directory](https://github.com/Kaida-Amethyst/moonbit-python/tree/master/CWarp)

4. Add the following configuration to the `moon.pkg.json` file in the directory where Python modules are needed:

```json
{
  "import": [
    "Kaida-Amethyst/python/python",
    {
      "path": "Kaida-Amethyst/python/matplotlib",
      "alias": "plt"
    }
  ],
  "link" : {
    "native" : {
      "cc-flags" : "./CWarp/core.c -I/usr/include/python3.13 -lpython3.13 -g"
    }
  }
}
```

Once configured, Python modules can be used in your project.

## License

This project is open-source under the Apache 2.0 License.

---

We welcome developers to contribute to the project and help improve the functionality and stability of Moonbit-Python. If you have any questions or suggestions, please submit them via Issues.

# Moonbit-Python

**注意**: 本项目目前处于早期开发阶段，可能存在不稳定性。建议仅在测试环境中使用，生产环境请谨慎评估。

## 项目简介

Moonbit-Python 是一个基于 CPython 的桥接工具，使开发者能够在 Moonbit 项目中直接操作 Python 对象，并充分利用 Python 生态系统的丰富资源，包括但不限于 NumPy、Matplotlib 等知名库。

## 快速开始

以下示例展示了如何在 Moonbit 中使用 Matplotlib 库绘制对数函数图像：

```moonbit
fn main {
  let x : Array[Double] = [] 
  for i in 0..<100 {
    x.push(i.to_double())
  }
  let y = x.map(@math.ln)

  let x = PyList::from(x)
  let y = PyList::from(y)

  @plt.plot(x, y)
  @plt.show()
}
```

执行以下命令运行示例：

```shell
moon run main/main.mbt --target native
```

运行后将显示由 Matplotlib 绘制的对数函数图像。

![matplotlib-log](https://blogimgs-1309485105.cos.ap-nanjing.myqcloud.com/pics-for-documents/moonbit-matplotlib-log.png)

## 安装与配置

1. 添加项目依赖：

```shell
moon add Kaida-Amethyst/python
```

2. 确认本地 Python 版本（例如 `python3.13`），根据python版本填写下方的链接选项。

3. 下载必要的 C 文件：
   - 文件位置：[CWarp 目录](https://github.com/Kaida-Amethyst/moonbit-python/tree/master/CWarp)

4. 在需要使用 Python 模块的目录下的 `moon.pkg.json` 文件中添加以下配置：

```json
{
  "import": [
    "Kaida-Amethyst/python/python",
    {
      "path": "Kaida-Amethyst/python/matplotlib",
      "alias": "plt"
    }
  ],
  "link" : {
    "native" : {
      "cc-flags" : "./CWarp/core.c -I/usr/include/python3.13 -lpython3.13 -g"
    }
  }
}
```

完成配置后，即可在项目中使用 Python 模块。

## 许可证

本项目采用 Apache 2.0 许可证开源。

---

我们欢迎开发者参与项目贡献，共同完善 Moonbit-Python 的功能和稳定性。如有任何问题或建议，请通过 Issues 提交。
